Вот декомпозиция задач для нашей AI-команды. Тимлид, прошу тебя распределить их и проконтролировать выполнение. Архитектор, твои решения по структуре и взаимодействию компонентов будут ключевыми. Разработчик, жду от тебя чистого и эффективного кода. Дебагер, твоя внимательность к деталям поможет нам выявить и устранить все узкие места.

***Отмечай задачи выполненными (например с помощью [x]) и останавливайся после выполнения. Начинай выполнение следующей задачи только после одобрения пользователя.***

Декомпозиция задач:

[x] 1. Исправление ошибки привязки категорий к задачам расхода


Описание: При создании задачи расхода категория не привязывается, возникает ошибка на бэкенде Failed to create task in database в taskController.js:14:18.

Задачи:
Для Дебагера:
Задача: Воспроизвести и задокументировать ошибку.
Подробности: Пошагово описать действия для воспроизведения. Приложить скриншоты/видео ошибки. Указать точные данные, которые вводились (тип задачи, категория, сумма и т.д.).
Ожидаемый результат: Детальный баг-репорт.
Для Разработчика:
Задача: Проанализировать и исправить ошибку в taskController.js.
Подробности: Изучить код в районе строки 14 taskController.js и связанные с ним модули/сервисы, отвечающие за создание задач и привязку категорий. Убедиться, что ID категории корректно передается и обрабатывается при сохранении задачи расхода в БД.
Ожидаемый результат: Исправленный код, успешно создающий задачи расхода с привязанными категориями.
Для Дебагера (после исправления):
Задача: Проверить исправление.
Подробности: Повторить сценарий из баг-репорта. Проверить создание задач с разными категориями. Убедиться, что ошибка больше не возникает и категория корректно сохраняется и отображается.
Ожидаемый результат: Подтверждение исправления или новый баг-репорт с уточнением.

Приоритет: Высокий.

[x] 2. Исправление расчета доходов и расходов за месяц


Описание: Обнаружены некорректные расчеты итоговых сумм доходов и расходов за выбранный месяц.

Задачи:
Для Дебагера:
Задача: Выявить и задокументировать сценарии некорректного расчета.
Подробности: Предоставить конкретные примеры данных (список операций доходов/расходов с суммами и датами) и указать, какой результат выдает система и какой должен быть правильный. Проверить пограничные случаи (начало/конец месяца, отсутствие операций, только доходы/только расходы).
Ожидаемый результат: Детальный баг-репорт с примерами.
Для Разработчика:
Задача: Проанализировать и исправить логику расчета.
Подробности: Изучить код, отвечающий за агрегацию и расчет сумм доходов/расходов. Это может быть как на бэкенде (запрос к БД), так и на фронтенде (обработка полученных данных). Обеспечить корректный учет всех операций в рамках выбранного месяца.
Ожидаемый результат: Исправленная логика расчета.
Для Дебагера (после исправления):
Задача: Проверить корректность расчетов.
Подробности: Использовать ранее подготовленные сценарии и добавить новые. Убедиться, что расчеты доходов и расходов за месяц теперь отображаются правильно во всех случаях.
Ожидаемый результат: Подтверждение исправления.

Приоритет: Высокий.

| [x] 3. Исправление ошибок на странице настроек (Категории и Дети)


Описание: Имеются проблемы с отображением и функциональностью на странице настроек, в частности, в разделах управления категориями и "детьми".

Задачи:
Для Дебагера:
Задача: Провести комплексное тестирование страницы настроек.
Подробности: Тщательно проверить все элементы и функции на странице настроек: создание, редактирование, удаление категорий; добавление, редактирование, удаление "детей". Задокументировать все визуальные баги (верстка, стили), ошибки взаимодействия (неработающие кнопки, некорректное сохранение данных) и другие проблемы. Каждый баг оформить отдельно.
Ожидаемый результат: Список баг-репортов по странице настроек.
Для Разработчика (по каждому баг-репорту):
Задача: Исправить ошибку на странице настроек.
Подробности: На основе баг-репорта устранить конкретную проблему фронтенда (HTML, CSS, JavaScript).
Ожидаемый результат: Исправленный код.
Для Дебагера (после исправления каждого бага):
Задача: Проверить исправление.
Подробности: Убедиться, что конкретный баг устранен и не появилось регрессий.
Ожидаемый результат: Подтверждение исправления.

Приоритет: Средний.

[x] 4. Корректная обработка отсутствия заметок при переключении недель


Описание: Сейчас при переключении на неделю без заметок сервер возвращает ошибку "not found", что отображается как ошибка на фронтенде. Требуется изменить поведение: сервер должен корректно сообщать об отсутствии данных, а фронтенд – отображать пустой состояний.

Задачи:
Для Архитектора:
Задача: Определить стандарт ответа API для случая отсутствия данных.
Подробности: Решить, какой HTTP статус и тело ответа должен возвращать сервер, если заметки на неделе отсутствуют (например, 200 OK с пустым массивом [] или 204 No Content).
Ожидаемый результат: Спецификация API для данного случая.
Для Разработчика (Бэкенд):
Задача: Модифицировать API заметок.
Подробности: Изменить логику соответствующего эндпоинта на бэкенде, чтобы он возвращал ответ согласно спецификации архитектора при отсутствии заметок, вместо ошибки 404.
Ожидаемый результат: Обновленный API.
Для Разработчика (Фронтенд):
Задача: Модифицировать обработку ответа от API заметок.
Подробности: Изменить код на фронтенде, чтобы он корректно обрабатывал новый ответ от сервера при отсутствии заметок и отображал пользователю соответствующее сообщение или пустой интерфейс (например, "Заметок на этой неделе нет").
Ожидаемый результат: Корректное отображение отсутствия заметок.
Для Дебагера:
Задача: Проверить новое поведение.
Подробности: Переключаться между неделями с заметками и без них. Убедиться, что при отсутствии заметок не возникает ошибок, а отображается ожидаемое "пустое состояние". Проверить ответ сервера в инструментах разработчика.
Ожидаемый результат: Подтверждение корректной работы.

Приоритет: Средний.

5. Разработка и обновление тестов


Описание: Существующие тесты не выявляют известные баги ("все тесты pass, а багов куча"). Необходимо написать тесты для нового функционала и обновить/дополнить старые.

Задачи:
Для Тимлида и Архитектора:
Задача: Анализ текущего покрытия тестами и определение стратегии.
Подробности: Провести ревизию существующих тестов. Определить критические области, требующие первоочередного покрытия. Выбрать типы тестов (юнит, интеграционные, E2E) для различных частей функционала.
Ожидаемый результат: План по улучшению тестового покрытия.
Для Разработчика (совместно с Дебагером):
Задача: Написать тесты для всех исправленных багов (TDD-подход где возможно).
Подробности: Перед исправлением бага (из п.1-4, 6-7) написать тест, который воспроизводит этот баг. После исправления убедиться, что тест проходит.
Ожидаемый результат: Тесты, покрывающие исправленные баги.
Задача: Обновить и дополнить существующие тесты.
Подробности: Пересмотреть старые тесты, актуализировать их под текущую логику, улучшить их надежность и полноту.
Ожидаемый результат: Актуализированный набор тестов.
Задача: Написать тесты для нового функционала (если такой будет в рамках этих задач, например, изменение логики отображения ставки).
Подробности: Для любых изменений в логике или нового поведения (например, п. 7) должны быть написаны соответствующие тесты.
Ожидаемый результат: Тесты для нового/измененного функционала.

Приоритет: Высокий (для тестов на исправляемые баги), Средний (для общего улучшения покрытия).

[x] 6. Объединение полей "Выбор ребенка" и "Имя ребенка"


Описание: На фронтенде существует дублирование функционала, связанное с выбором ребенка и отображением его имени. Требуется объединить эти элементы для улучшения UX.

Задачи:
Для Архитектора (или Тимлида с UX-навыками):
Задача: Проектирование нового объединенного компонента.
Подробности: Определить, как будет выглядеть и функционировать объединенный элемент управления. Это может быть выпадающий список, который при выборе отображает имя и, возможно, другие атрибуты ребенка, или другой подходящий контрол.
Ожидаемый результат: Макет или четкое описание нового компонента.
Для Разработчика (Фронтенд):
Задача: Реализовать объединенный компонент.
Подробности: На основе проекта от архитектора разработать новый UI-компонент. Обеспечить корректную работу логики выбора ребенка и отображения его данных. Удалить старые, дублирующие поля.
Ожидаемый результат: Реализованный и интегрированный новый компонент.
Для Дебагера:
Задача: Протестировать новый компонент.
Подробности: Убедиться, что выбор ребенка работает корректно, данные отображаются правильно, старый функционал полностью заменен и не возникает ошибок. Проверить на разных сценариях (нет детей, один ребенок, много детей).
Ожидаемый результат: Подтверждение корректной работы.

Приоритет: Низкий-Средний.

[x] 7. Изменение логики отображения и редактирования "Ставки в час"


Описание: "Ставка в час" в карточке задачи должна стать полем только для чтения. Редактирование ставки должно быть возможно только через меню настроек в карточке ребенка.

Задачи:
Для Разработчика (Фронтенд):
Задача: Модифицировать отображение ставки в карточке задачи.
Подробности: Сделать поле "Ставка в час" в интерфейсе карточки задачи нередактируемым. Оно должно отображать актуальную ставку ребенка, назначенного на задачу.
Ожидаемый результат: Поле "Ставка в час" в карточке задачи read-only.
Задача: Обеспечить редактирование ставки в настройках ребенка.
Подробности: Убедиться (или реализовать), что на странице/в модальном окне настроек конкретного ребенка есть поле для редактирования его "ставки в час", и оно корректно сохраняет изменения.
Ожидаемый результат: Возможность изменять ставку в настройках ребенка.
Для Разработчика (Бэкенд, если требуется):
Задача: Адаптировать API и логику хранения данных (при необходимости).
Подробности: Если текущая структура данных или API не поддерживают такое разделение (например, ставка хранилась прямо в задаче), внести необходимые изменения на бэкенде.
Ожидаемый результат: Бэкенд поддерживает новую логику работы со ставкой.
Для Дебагера:
Задача: Протестировать новую логику работы со ставкой.
Подробности: Убедиться, что ставка в карточке задачи только отображается и соответствует ставке из настроек ребенка. Проверить, что изменение ставки в настройках ребенка корректно отражается в задачах, связанных с этим ребенком (для новых и, возможно, для уже существующих, если это предполагается). Проверить сценарии с разными детьми и разными ставками.
Ожидаемый результат: Подтверждение корректной работы.

Приоритет: Средний.

??. Техдолг: Проверка работы Drag-and-Drop на мобильных устройствах


Описание: Есть предположение, что функционал Drag-and-Drop (перетаскивания элементов, возможно, задач в календаре или между статусами github.com (1), github.com (2), youtube.com) может некорректно работать на мобильных устройствах. Необходимо это проверить и, при необходимости, исправить.

Задачи:
Для Дебагера:
Задача: Исследовать и протестировать Drag-and-Drop на мобильных устройствах.
Подробности: Тщательно протестировать весь функционал, использующий Drag-and-Drop, на различных мобильных устройствах (iOS, Android) и в разных браузерах (Safari, Chrome). Задокументировать все найденные проблемы: не срабатывает, работает некорректно, вызывает ошибки, проблемы с производительностью и т.д. Предоставить шаги воспроизведения, видео, скриншоты.
Ожидаемый результат: Детальный отчет о состоянии Drag-and-Drop на мобильных устройствах. Если проблем нет – подтверждение корректной работы. Если есть – список баг-репортов.
Для Разработчика (если найдены баги):
Задача: Исправить проблемы с Drag-and-Drop на мобильных устройствах.
Подробности: На основе баг-репортов от дебагера устранить проблемы. Это может потребовать адаптации JS-кода для обработки touch-событий, использования специфичных библиотек или стилей.
Ожидаемый результат: Исправленный функционал Drag-and-Drop.
Для Дебагера (после исправлений):
Задача: Повторно протестировать Drag-and-Drop на мобильных.
Подробности: Убедиться, что все заявленные проблемы устранены и не появилось новых.
Ожидаемый результат: Подтверждение исправлений.

Приоритет: Средний (исследование), Высокий (если подтвердятся критические баги).