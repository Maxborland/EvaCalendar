# План по локализации дат в приложении

## 1. Анализ текущей ситуации (выполнено):

*   **Библиотека дат:** Подтверждено использование Moment.js.
*   **Конфигурация локали:** Файл [`front/src/momentConfig.ts`](../front/src/momentConfig.ts) показывает, что русская локаль (`ru`) импортируется через `moment/min/moment-with-locales` и уже установлена глобально с помощью `moment.locale('ru');`. Это означает, что никаких дополнительных действий по подключению или базовой настройке локали не требуется.

## 2. Определение и применение форматов дат:

*   **Компонент "Блок сегодня" ([`front/src/components/SummaryBlock.tsx`](../front/src/components/SummaryBlock.tsx)):**
    *   **Текущее форматирование:** `today.format('DD MMMM YYYY')`
    *   **Требуемый формат:** "15 июня 2025"
    *   **Предлагаемое решение:** Оставить текущую строку формата `'DD MMMM YYYY'`. С глобально установленной русской локалью Moment.js должен корректно отображать дату, включая название месяца в нужном падеже (например, "15 июня 2025").
    *   **Действия:** Изменений в коде этого файла не требуется.

*   **Компонент `DayColumn` ([`front/src/components/DayColumn.tsx`](../front/src/components/DayColumn.tsx)):**
    *   **Текущее форматирование:** Заголовок дня формируется из двух частей: `{fullDate.clone().locale('ru').format('dddd')} {fullDate.clone().locale('ru').format('D MMMM')}`.
    *   **Требуемый формат:** "Четверг, 27 Мая".
    *   **Предлагаемое решение:**
        1.  Объединить два вызова `format()` в один для получения желаемого вида: `'dddd, D MMMM'`.
        2.  Удалить избыточные вызовы `.locale('ru')` из этой строки, так как локаль уже установлена глобально.
        3.  Вызов `.clone()` можно оставить для явного указания работы с копией объекта Moment.
    *   **Действия:** Изменить строку в файле [`front/src/components/DayColumn.tsx`](../front/src/components/DayColumn.tsx) следующим образом:
        *   **Было:** `<span className="day-name">{fullDate.clone().locale('ru').format('dddd')} {fullDate.clone().locale('ru').format('D MMMM')}</span>`
        *   **Станет:** `<span className="day-name">{fullDate.clone().format('dddd, D MMMM')}</span>`

## 3. Рекомендации по гибкости локали:

*   Текущая настройка с жестко заданной русской локалью в [`front/src/momentConfig.ts`](../front/src/momentConfig.ts) полностью удовлетворяет требованиям текущей задачи.
*   **На будущее:** Если потребуется поддержка нескольких языков, механизм установки локали Moment.js нужно будет сделать динамическим.

## 4. План проверки:

*   После внесения предложенных изменений (только в [`front/src/components/DayColumn.tsx`](../front/src/components/DayColumn.tsx)) необходимо будет выполнить визуальную проверку в приложении:
    *   Убедиться, что в "блоке сегодня" дата отображается корректно.
    *   Убедиться, что в заголовках `DayColumn` даты отображаются корректно.

## Визуализация плана (Mermaid):

```mermaid
graph TD
    A[Задача: Локализация дат] --> B{Проверка Moment.js и локали 'ru'};
    B -- Файл 'momentConfig.ts' --> C[Локаль 'ru' установлена глобально];
    C --> D[Определение форматов и мест изменений];
    D --> E["SummaryBlock.tsx: 'DD MMMM YYYY'"];
    E --> F[Изменения не требуются];
    D --> G["DayColumn.tsx: 'dddd' + 'D MMMM'"];
    G --> H[Изменить на 'dddd, D MMMM'];
    H --> I[Удалить избыточные .locale('ru')];
    I --> J[Внести изменения в DayColumn.tsx];
    F & J --> K[Визуальная проверка в приложении];
    K --> L[Задача выполнена];