Обзор задачи: Адаптировать существующий бэкенд к новой схеме базы данных. Работа будет проводиться итеративно, с постоянной проверкой и тестированием после каждого внесения изменений, чтобы гарантировать целостность данных и работоспособность системы.

Модуль: Back-end / Адаптация к новой схеме БД
Задача 1: Итеративная адаптация Back-end к изменениям в схеме БД


Описание: Начать процесс адаптации Back-end кода к изменениям, которые были внесены в схему базы данных. Поскольку полный объем изменений в схеме и их влияние на код неизвестны заранее, эта задача будет выполняться итеративно, модифицируя Back-end компоненты по мере необходимости и тщательно проверяя каждый шаг.

Требования:
Подготовительный этап:
Ознакомиться с текущей версией новой схемы БД (schema.sql, миграции или соответствующая документация), чтобы получить общее представление о внесенных изменениях (новые таблицы, измененные столбцы, удаленные сущности и т.д.).
Проверить текущее состояние тестовой среды и убедиться в ее готовности для итеративной разработки.
Убедиться в наличии актуальных резервных копий БД (для тестовой среды).
Итеративный процесс:
Каждая итерация должна быть сфокусирована на минимальном, атомарном изменении. Это может быть адаптация одного API-эндпоинта, изменение одной модели данных, или обновление логики, затрагивающей одну таблицу.
Идентифицировать затронутые компоненты: Определить, какие части Back-end кода (модели, репозитории, сервисы, контроллеры/эндпоинты) затронуты конкретным изменением в схеме БД.
Внесение изменений: Аккуратно внести необходимые изменения в код Back-end для корректного взаимодействия с новой схемой. Это может включать:
Обновление SQL-запросов.
Изменение ORM-моделей.
Адаптация бизнес-логики, которая работает с данными.
Корректировка сериализации/десериализации данных.
Проверка и тестирование (ключевой шаг каждой итерации):
После каждого значимого изменения в коде Back-end, выполнить тестирование. Это должно включать:
Запуск юнит-тестов для измененных компонентов.
Запуск интеграционных тестов для затронутых API-эндпоинтов, чтобы убедиться, что они по-прежнему возвращают ожидаемые данные и корректно обрабатывают запросы.
Ручное тестирование через Front-end (если применимая часть функционала уже доступна) для визуальной проверки работоспособности.
Проверка логов Back-end на предмет любых ошибок или предупреждений.
Особое внимание уделить проверке миграции данных, если изменения в схеме требуют преобразования существующих данных.
Фиксация: После успешной проверки и тестирования, зафиксировать изменения в системе контроля версий.

Важные принципы:
ВАЖНО. НЕ ИЗМЕНЯТЬ СХЕМУ БД И ЕЕ МИГРАЦИИ. ЕСЛИ ЕСТЬ ОШИБКА В СХЕМЕ, ТО СООБЩИ ОБ ЭТОМ ПОЛЬЗОВАТЕЛЮ И ОСТАНОВИСЬ.
Принцип "Одна вещь за раз": Не пытаться изменить слишком много кода за одну итерацию. Чем меньше изменение, тем легче найти и исправить ошибку.
Постоянные тесты: Тестирование не должно быть "в конце", оно должно быть неотъемлемой частью каждой итерации.
Обратная связь: В случае возникновения неразрешимых проблем, блокировок или если требуется архитектурное решение, немедленно сообщать о них.


Критерии приемки (для общего завершения задачи, не для каждой итерации):
Back-end код полностью адаптирован к новой схеме БД.
Все API-эндпоинты, затронутые изменениями, функционируют корректно и возвращают ожидаемые данные.
Отсутствуют необработанные ошибки или падения на Back-end, связанные с новой схемой БД.
Все автоматизированные тесты (юнит- и интеграционные), касающиеся взаимодействия с БД, проходят успешно.
Система сохраняет целостность данных при выполнении всех стандартных операций.