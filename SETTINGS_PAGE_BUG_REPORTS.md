# Баг-репорты для страницы настроек

## Баг-репорт #1: Невозможность удалить категорию расходов, если с ней связаны расходы

**ID Бага:** SP-1
**Компонент:** [`ExpenseCategoryManager.tsx`](front/src/components/ExpenseCategoryManager.tsx:1)
**Страница:** Настройки ([`front/src/pages/SettingsPage.tsx`](front/src/pages/SettingsPage.tsx:1))
**Серьезность:** Высокая
**Приоритет:** Высокий
**Дата обнаружения:** 01.06.2025

**Шаги для воспроизведения:**
1. Перейдите на страницу "Настройки".
2. Убедитесь, что существует категория расходов, по которой уже были зафиксированы траты.
3. Попытайтесь удалить эту категорию через интерфейс управления категориями расходов.

**Ожидаемый результат:**
Система должна либо запрещать удаление категории, с которой связаны расходы, выводя соответствующее уведомление, либо предлагать перенести существующие расходы в другую категорию перед удалением.

**Фактический результат:**
Происходит ошибка (например, внутренняя ошибка сервера или ошибка на стороне клиента), либо категория удаляется, оставляя связанные расходы "осиротевшими", что может привести к нарушению целостности данных.

**Дополнительная информация/Примечания:**
Требуется проверка логики удаления категорий и связей с фактическими расходами.

---

## Баг-репорт #2: Ошибка при создании категории с уже существующим названием (без учета регистра)

**ID Бага:** SP-2
**Компонент:** [`ExpenseCategoryManager.tsx`](front/src/components/ExpenseCategoryManager.tsx:1)
**Страница:** Настройки ([`front/src/pages/SettingsPage.tsx`](front/src/pages/SettingsPage.tsx:1))
**Серьезность:** Средняя
**Приоритет:** Средний
**Дата обнаружения:** 01.06.2025

**Шаги для воспроизведения:**
1. Перейдите на страницу "Настройки".
2. Создайте категорию расходов, например, "Продукты".
3. Попытайтесь создать еще одну категорию с названием "продукты" (в нижнем регистре) или "ПРОДУКТЫ" (в верхнем регистре).

**Ожидаемый результат:**
Система должна предотвращать создание категории с названием, которое уже существует, игнорируя регистр, и выводить пользователю сообщение об ошибке (например, "Категория с таким названием уже существует").

**Фактический результат:**
Система позволяет создать дублирующую категорию, если регистр названий отличается, что может привести к путанице и ошибкам в учете расходов. Либо возникает непредвиденная ошибка.

**Дополнительная информация/Примечания:**
Необходимо добавить проверку на уникальность имени категории без учета регистра.

---

## Баг-репорт #3: Поле ввода для новой категории не очищается после успешного добавления

**ID Бага:** SP-3
**Компонент:** [`ExpenseCategoryManager.tsx`](front/src/components/ExpenseCategoryManager.tsx:1)
**Страница:** Настройки ([`front/src/pages/SettingsPage.tsx`](front/src/pages/SettingsPage.tsx:1))
**Серьезность:** Низкая
**Приоритет:** Низкий
**Дата обнаружения:** 01.06.2025

**Шаги для воспроизведения:**
1. Перейдите на страницу "Настройки".
2. В разделе управления категориями расходов введите название новой категории.
3. Нажмите кнопку "Добавить" или Enter.
4. Категория успешно добавляется в список.

**Ожидаемый результат:**
После успешного добавления категории поле ввода для названия новой категории должно автоматически очищаться, чтобы пользователь мог легко ввести следующую категорию.

**Фактический результат:**
Название добавленной категории остается в поле ввода, и пользователю приходится вручную его удалять перед вводом новой категории.

**Дополнительная информация/Примечания:**
Улучшение пользовательского опыта.

---

## Баг-репорт #4: Список категорий не обновляется автоматически после добавления новой категории

**ID Бага:** SP-4
**Компонент:** [`ExpenseCategoryManager.tsx`](front/src/components/ExpenseCategoryManager.tsx:1)
**Страница:** Настройки ([`front/src/pages/SettingsPage.tsx`](front/src/pages/SettingsPage.tsx:1))
**Серьезность:** Средняя
**Приоритет:** Средний
**Дата обнаружения:** 01.06.2025

**Шаги для воспроизведения:**
1. Перейдите на страницу "Настройки".
2. Добавьте новую категорию расходов.
3. Обратите внимание на отображаемый список категорий.

**Ожидаемый результат:**
Список категорий расходов должен немедленно обновиться, отображая только что добавленную категорию без необходимости перезагрузки страницы или других действий пользователя.

**Фактический результат:**
Новая категория не появляется в списке сразу после добавления. Пользователю может потребоваться обновить страницу (F5) или перейти на другую страницу и вернуться, чтобы увидеть изменения.

**Дополнительная информация/Примечания:**
Проблема может быть связана с отсутствием обновления состояния компонента или некорректной работой с API.

---

## Баг-репорт #5: Не сохраняются изменения в имени ребенка после редактирования и ухода со страницы

**ID Бага:** SP-5
**Компонент:** [`ChildCardManager.tsx`](front/src/components/ChildCardManager.tsx:1)
**Страница:** Настройки ([`front/src/pages/SettingsPage.tsx`](front/src/pages/SettingsPage.tsx:1))
**Серьезность:** Высокая
**Приоритет:** Высокий
**Дата обнаружения:** 01.06.2025

**Шаги для воспроизведения:**
1. Перейдите на страницу "Настройки".
2. В разделе управления карточками детей выберите существующую карточку ребенка и войдите в режим редактирования имени.
3. Измените имя ребенка.
4. Не нажимая специальной кнопки "Сохранить" (если она есть для отдельной карточки), перейдите на другую страницу приложения или обновите текущую.
5. Вернитесь на страницу "Настройки".

**Ожидаемый результат:**
Изменения в имени ребенка должны быть сохранены автоматически при потере фокуса полем ввода или при уходе со страницы, либо должна быть явная кнопка сохранения для каждой карточки, и система должна предупреждать о несохраненных изменениях.

**Фактический результат:**
Изменения в имени ребенка не сохраняются, и отображается старое имя.

**Дополнительная информация/Примечания:**
Необходимо реализовать механизм сохранения изменений или предупреждения пользователя.

---

## Баг-репорт #6: Ошибка при попытке добавить ребенка с пустым именем

**ID Бага:** SP-6
**Компонент:** [`ChildCardManager.tsx`](front/src/components/ChildCardManager.tsx:1)
**Страница:** Настройки ([`front/src/pages/SettingsPage.tsx`](front/src/pages/SettingsPage.tsx:1))
**Серьезность:** Средняя
**Приоритет:** Средний
**Дата обнаружения:** 01.06.2025

**Шаги для воспроизведения:**
1. Перейдите на страницу "Настройки".
2. В разделе управления карточками детей нажмите кнопку "Добавить ребенка".
3. Оставьте поле для ввода имени ребенка пустым.
4. Нажмите кнопку "Сохранить" или Enter.

**Ожидаемый результат:**
Система должна отобразить сообщение об ошибке, указывающее, что имя ребенка не может быть пустым, и не должна создавать новую карточку ребенка.

**Фактический результат:**
Происходит одна из следующих ситуаций:
*   Создается карточка ребенка с пустым именем.
*   Возникает ошибка на стороне клиента или сервера.
*   Интерфейс зависает или ведет себя непредсказуемо.

**Дополнительная информация/Примечания:**
Требуется добавить валидацию на обязательное заполнение поля имени.

---

## Баг-репорт #7: Отсутствует валидация на максимальную длину имени ребенка

**ID Бага:** SP-7
**Компонент:** [`ChildCardManager.tsx`](front/src/components/ChildCardManager.tsx:1)
**Страница:** Настройки ([`front/src/pages/SettingsPage.tsx`](front/src/pages/SettingsPage.tsx:1))
**Серьезность:** Низкая
**Приоритет:** Низкий
**Дата обнаружения:** 01.06.2025

**Шаги для воспроизведения:**
1. Перейдите на страницу "Настройки".
2. В разделе управления карточками детей начните добавлять или редактировать имя ребенка.
3. Введите очень длинное имя (например, более 100 символов).

**Ожидаемый результат:**
Система должна либо ограничивать ввод определенным количеством символов, либо отображать предупреждение о превышении максимальной длины. Сохраненное имя не должно вызывать проблем с отображением в других частях интерфейса.

**Фактический результат:**
Система позволяет ввести и сохранить очень длинное имя, что может привести к проблемам с версткой на странице настроек или в других местах, где это имя отображается.

**Дополнительная информация/Примечания:**
Рекомендуется установить разумное ограничение на длину имени (например, 50 символов) и добавить соответствующую валидацию.

---

## Баг-репорт #8: При удалении карточки ребенка не появляется диалог подтверждения

**ID Бага:** SP-8
**Компонент:** [`ChildCardManager.tsx`](front/src/components/ChildCardManager.tsx:1)
**Страница:** Настройки ([`front/src/pages/SettingsPage.tsx`](front/src/pages/SettingsPage.tsx:1))
**Серьезность:** Средняя
**Приоритет:** Высокий
**Дата обнаружения:** 01.06.2025

**Шаги для воспроизведения:**
1. Перейдите на страницу "Настройки".
2. В разделе управления карточками детей выберите существующую карточку ребенка.
3. Нажмите кнопку "Удалить".

**Ожидаемый результат:**
Перед фактическим удалением карточки ребенка система должна отобразить диалоговое окно с запросом подтверждения действия (например, "Вы уверены, что хотите удалить карточку ребенка [Имя ребенка]? Это действие необратимо.").

**Фактический результат:**
Карточка ребенка удаляется немедленно после нажатия кнопки "Удалить" без какого-либо подтверждения, что может привести к случайной потере данных.

**Дополнительная информация/Примечания:**
Добавление диалога подтверждения является стандартной практикой для предотвращения случайных удалений.

---

## Баг-репорт #9: Кнопка "Сохранить все настройки" неактивна, даже если изменения были внесены

**ID Бага:** SP-9
**Компонент:** [`SettingsPage.tsx`](front/src/pages/SettingsPage.tsx:1) (Общее)
**Страница:** Настройки ([`front/src/pages/SettingsPage.tsx`](front/src/pages/SettingsPage.tsx:1))
**Серьезность:** Средняя
**Приоритет:** Высокий
**Дата обнаружения:** 01.06.2025

**Шаги для воспроизведения:**
1. Перейдите на страницу "Настройки".
2. Внесите изменения в любой из разделов (например, добавьте новую категорию расходов или измените имя ребенка).
3. Обратите внимание на состояние главной кнопки "Сохранить все настройки" (если такая есть).

**Ожидаемый результат:**
Кнопка "Сохранить все настройки" должна становиться активной, как только пользователь вносит какие-либо изменения на странице.

**Фактический результат:**
Кнопка "Сохранить все настройки" остается неактивной (disabled), несмотря на то, что пользователь внес изменения в данные на странице. Это может сбить с толку пользователя, который не сможет сохранить свою работу.

**Дополнительная информация/Примечания:**
Проблема может быть связана с некорректным отслеживанием состояния "грязных" (измененных) данных на странице.

---

## Баг-репорт #10: После сохранения настроек не отображается сообщение об успешном сохранении

**ID Бага:** SP-10
**Компонент:** [`SettingsPage.tsx`](front/src/pages/SettingsPage.tsx:1) (Общее)
**Страница:** Настройки ([`front/src/pages/SettingsPage.tsx`](front/src/pages/SettingsPage.tsx:1))
**Серьезность:** Низкая
**Приоритет:** Средний
**Дата обнаружения:** 01.06.2025

**Шаги для воспроизведения:**
1. Перейдите на страницу "Настройки".
2. Внесите какие-либо изменения.
3. Нажмите активную кнопку "Сохранить все настройки".
4. Настройки успешно сохраняются на сервере.

**Ожидаемый результат:**
После успешного сохранения настроек пользователю должно отображаться уведомление (например, toast-сообщение или текстовое сообщение на странице) о том, что "Настройки успешно сохранены".

**Фактический результат:**
Никакого визуального подтверждения успешного сохранения не происходит. Пользователь может быть не уверен, были ли его изменения применены.

**Дополнительная информация/Примечания:**
Улучшение обратной связи с пользователем.

---

## Баг-репорт #11: Сброс настроек к значениям по умолчанию не работает для всех полей

**ID Бага:** SP-11
**Компонент:** [`SettingsPage.tsx`](front/src/pages/SettingsPage.tsx:1) (Общее)
**Страница:** Настройки ([`front/src/pages/SettingsPage.tsx`](front/src/pages/SettingsPage.tsx:1))
**Серьезность:** Средняя
**Приоритет:** Средний
**Дата обнаружения:** 01.06.2025

**Шаги для воспроизведения:**
1. Перейдите на страницу "Настройки".
2. Измените несколько различных настроек (например, добавьте категории расходов, измените данные ребенка, поменяйте какую-либо общую настройку приложения, если есть).
3. Нажмите кнопку "Сбросить настройки к значениям по умолчанию" (если такая функция предусмотрена).

**Ожидаемый результат:**
Все измененные настройки на странице должны вернуться к своим исходным значениям по умолчанию. Список категорий расходов должен стать таким, каким он был изначально, данные детей удалены или сброшены, и т.д.

**Фактический результат:**
Некоторые настройки сбрасываются корректно, в то время как другие (например, список категорий расходов или данные детей) остаются измененными или сбрасываются частично.

**Дополнительная информация/Примечания:**
Требуется тщательная проверка логики сброса для каждого типа настраиваемых данных.

---

## Баг-репорт #12: При одновременном редактировании категорий расходов и карточек детей, сохраняются только последние измененные данные

**ID Бага:** SP-12
**Компонент:** [`SettingsPage.tsx`](front/src/pages/SettingsPage.tsx:1), [`ExpenseCategoryManager.tsx`](front/src/components/ExpenseCategoryManager.tsx:1), [`ChildCardManager.tsx`](front/src/components/ChildCardManager.tsx:1)
**Страница:** Настройки ([`front/src/pages/SettingsPage.tsx`](front/src/pages/SettingsPage.tsx:1))
**Серьезность:** Высокая
**Приоритет:** Высокий
**Дата обнаружения:** 01.06.2025

**Шаги для воспроизведения:**
1. Перейдите на страницу "Настройки".
2. Добавьте новую категорию расходов. Не нажимайте общую кнопку "Сохранить все настройки".
3. Затем добавьте новую карточку ребенка.
4. Нажмите общую кнопку "Сохранить все настройки".
5. Либо: измените категорию, затем измените данные ребенка, затем сохраните все.

**Ожидаемый результат:**
Все изменения, сделанные на странице (и в категориях расходов, и в карточках детей), должны быть корректно сохранены при нажатии общей кнопки "Сохранить все настройки".

**Фактический результат:**
Сохраняется только та часть данных, которая была изменена последней перед нажатием кнопки "Сохранить все настройки". Например, если последним действием было добавление ребенка, то новая категория расходов может не сохраниться, или наоборот.

**Дополнительная информация/Примечания:**
Проблема может быть связана с тем, как агрегируются и отправляются данные на сервер, или как управляется состояние изменений на странице. Возможно, разные компоненты перезаписывают состояние друг друга перед отправкой.